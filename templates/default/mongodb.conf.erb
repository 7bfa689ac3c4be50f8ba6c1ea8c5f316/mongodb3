# THIS FILE IS MAINTAINED BY CHEF. DO NOT MODIFY AS IT WILL BE OVERWRITTEN.
net:
    bindIp: <%= @bind_ip %>
    port: <%= @port %>
operationProfiling: {}
processManagement:
    fork: <%= node['mongodb3']['config']['processManagement']['fork'] %>
    pidFilePath: <%= node['mongodb3']['config']['processManagement']['pidFilePath'] %>
<% unless @replset_name.to_s.empty? -%>
replication:
    replSetName: <%= @replset_name %>
<% end -%>
security:
    authorization: <%= @auth %>
<% unless node['mongodb3']['config']['key_file_content'].to_s.empty? -%>
    keyFile: <%= @key_file %>
<% end -%>
<% if node['mongodb3']['install']['configsvr'] %>
sharding:
    clusterRole: configsvr
<% end -%>
storage:
    dbPath: <%= @db_path %>
    journal:
        enabled: true
    engine: <%= node['mongodb3']['config']['storage']['engine'] %>
<% if node['mongodb3']['config']['storage']['engine'] == 'wiredTiger' %>
    wiredTiger:
        engineConfig:
            cacheSizeGB: <%= node['mongodb3']['config']['storage']['wiredTiger']['engineConfig']['cacheSizeGB'] %>
            statisticsLogDelaySecs: <%= node['mongodb3']['config']['storage']['wiredTiger']['engineConfig']['statisticsLogDelaySecs'] %>
            journalCompressor: <%= node['mongodb3']['config']['storage']['wiredTiger']['engineConfig']['journalCompressor'] %>
            directoryForIndexes: <%= node['mongodb3']['config']['storage']['wiredTiger']['engineConfig']['directoryForIndexes'] %>
        collectionConfig:
            blockCompressor: <%= node['mongodb3']['config']['storage']['wiredTiger']['collectionConfig']['blockCompressor'] %>
        indexConfig:
            prefixCompression: <%= node['mongodb3']['config']['storage']['wiredTiger']['indexConfig']['prefixCompression'] %>
<% end -%>
systemLog:
    destination: file
    path: <%= @log_path %>
    logAppend: true
    traceAllExceptions: true
